Инструкция
==========

Нужно создать сервис авторизации, аутентификации пользователей на языке Go.
А так-же систему уровней доступа к различным ресурсам.
Нужно так-же сделать создание групп пользователей и назначение им прав доступа.
Так-же нужно сделать возможность назначения пользователей группам.
И права доступа пользователю.

Сервис должен предоставлять следующие методы:
* Создание пользователя
* Авторизация пользователя
* Получение информации о уровнях доступа пользователя с учетом групп
* Создание группы
* Назначение группе прав доступа
* Назначение пользователя группе
* Удаление и изменение пользователя
* Удаление и изменение группы

Сервис должен быть реализован на языке Go, использовать базу данных MySQL через ORM GORM.
Сервис должен быть покрыт тестами.

Все зависимости должны быть описаны в go.mod файле.
Нужно сдедлать этот проект внешней библиотекой по адресу github.com/axgrid/accessgo

Пользователь
============

Пользователь должен иметь следующие поля:
* ID
* email
* Пароль (хэшированный)
* Имя
* Тип пользователя (админ, сотрудник, пользователь, блокированный)
* Дату создания
* Дату обновления
* Доступы
* Группы

Группа
======

Группа должна иметь следующие поля:
* ID
* Название
* Права доступа


Права доступа
=============

Поля:
* ID
* Название
* Описание

Доступы будут создаваться по шаблону service:action например: user:create, user:read, user:update, user:delete 

Уровни доступа пользователя
===========================

Поля:
* ID Доступа
* ID Пользователя

Уровни доступа группы
=====================

Поля:
* ID Доступа
* ID Группы



Методы сервиса
==============

Сервис должен предоставлять следующие методы:
* Создание пользователя CreateNewUser(email, password, name, userType) (*User, error)
* Авторизация пользователя AuthenticateUser(email, password) (*User, error)
* Получение информации о уровнях доступа пользователя с учетом групп GetAccessLevels(userId, access_name) (bool, error) (если пользователь admin то всегда true)
* Создание группы CreateGroup(name string) (*Group, error)
* Создание Права доступа CreateAccess(name, description string) (*Access, error)
* Дать пользователю уровень доступа AddUserAccessLevel(userId, access_name) error (проверять что такое access_name существует)
* Забрать у пользователя уровень доступа RemoveUserAccessLevel(userId, access_name) error 
* Дать группе уровень доступа AddGroupAccessLevel(groupId, access_name) error (проверять что такое access_name существует)
* Забрать у группы уровень доступа RemoveGroupAccessLevel(groupId, access_name) error 
* Назначение пользователя группе AssignUserToGroup(userId, groupId) error
* Исключение пользователя из группы ExcludeUserFromGroup(userId, groupId) error
* Указания четкого списка групп пользователя SetUserGroups(userId, ...groupIds) error (если groupIds не указана то нужно удалить пользователя из всех групп)
* Удаление пользователя DeleteUser(userId) error
* Удаление группы DeleteGroup(groupId) error
* Изменение пользователя UpdateUser(userId, email, password, name, userType) (*User, error)
* Изменение группы UpdateGroup(groupId, name) (*Group, error)

Так-же нужно создать методы для создания дефолтных прав доступа:

SetupDefaultPermissions() 
Он создаст права:
user:create user:read user:update user:delete 
group:create group:read group:update group:delete 
access:create access:read access:update access:delete
user_access:set group_access:set 

Дополнение
==========

Нужно получить все права доступа пользователя с учетом групп. 
Пользователь может быть в нескольких группах, и уровни доступа пользователя должны быть суммированы с учетом групп.
Нужно уметь объеденять все значение C,R,U,D которые стоят в true в одно значение. 
Например:
 Пользователь находится в 2-х группах одновременно и в первой группе у него уровни доступа CRUD = false,false,true,false, 
а во второй группе false,true,false,false. И у сапого пользователя есть уровни доступа быть CRUD = true,false,false,false. 
Так вот результатом работы метода GetAccessLevels(userId) должно быть CRUD = true,true,true,false.


WEB API делать не нужно только сервис и тесты к нему.
main.go не нужен, только сервис и тесты к нему.



Структура проекта такая:

```

go.mod
structs.go - структуры данных пользователя, группы, прав доступа и уровней доступа
service.go - сервис авторизации, создания пользователя, группы, назначения прав доступа и группы пользователю
service_test.go - тесты к сервису

```

Тестирование
============

Нужно проверить и убедится что мы можем:
* Создать, редактировать, удалить пользователя
* Создать, редактировать, удалить группу
* Назначить пользователю группу, исключить из группы
* Назначить группе права доступа
* Назначить пользователю права доступа
* Получить права доступа пользователя с учетом групп в которых он состоит
* Проверить есть ли у пользователя права доступа например на удаление конкретного "Права доступа" 
* Проверка валидности пользователя по email и паролю

